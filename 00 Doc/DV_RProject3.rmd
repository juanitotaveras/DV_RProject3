
---
title: "DV_RProject3"
author: "Zareen Khayrattee, Kayne Khoury, Juanito Taveras"
date: "October 14, 2015"
output: html_document
---

#Extraction, Transformation, Loading
```
To fix our data so it can be loaded into Oracle correctly, we first replaced the periods in our column rows with underscores. 

> names(df) <-gsub("\\.+", "_", names(df))

We then, set our measures appropriately:

> measures <- c("Year", "Deaths_less_than_1_month", "Deaths_1_to_59_months", "Deaths_0_to_4_years") 

We created our re-formatted csv, then created our SQL concatenation

> tableName <- gsub(" +", "_", gsub("[^A-z, 0-9, ]", "", gsub(".csv", "", file_path)))
sql <- paste("CREATE TABLE", tableName, "Respiratory_Infections")
if( length(measures) > 1 || ! is.na(dimensions)) {
  for(d in dimensions) {
    sql <- paste(sql, paste(d, "varchar2(4000),\n"))
  }
}
if( length(measures) > 1 || ! is.na(measures)) {
  for(m in measures) {
    if(m != tail(measures, n=1)) sql <- paste(sql, paste(m, "number(38,4),\n"))
    else sql <- paste(sql, paste(m, "number(38,4)\n"))
  }
}
sql <- paste(sql, ");")
cat(sql)

And pasted it into SQL developer. We ran this script, then imported our reformatted CSV to create the table.
```
----------------
##Workflow 1

```
The workflow is designed to explore the effects of prematurity in newborns across the globe. The data sets contain total mortality for children under age 5 caused by prematuriy, respiratory infections, and birth trauma or asphyxiation. From this data, we calculated the total mortality for all causes, the percentage aged 1-27 days, and the percentage for prematurity. The results are then filtered to consider countries with more than 100,000 total deaths for all years and causes. Our visualization tells us that the United States has both the highest percentage aged 1-27 days, and the highest percentage for prematuriy. This is a surprising find given the contradiction to the commonly held notion that infant mortality rates are the lowest amongst developed, Westernized nations. 
```
```{r}
source("../02 Data Wrangling/Blending_P2.R",echo=TRUE)
```
